<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="springbootmvcshopping.mapper.LoginMapper">
    <select id="idCheckSelectOne" parameterType="string" resultType="integer">
        select 1 from members where member_id = #{userId}
        union
        select 1 from employees where emp_id = #{userId}
    </select>

    <select id="emailCheckSelectOne" parameterType="string" resultType="integer">
        select 1  from members where member_email = #{userEmail}
        union
        select 1 from employees where emp_email = #{userEmail}
    </select>

    <select id="loginSelectOne" parameterType="string" resultType="AuthInfoDTO">
        select member_id as userId, member_pw as userPw, member_name as userName, member_email as userEmail, 'mem' as grade from members where member_id = #{userId}
            union
        select emp_id, emp_pw, emp_name, emp_email, 'emp' from employees where emp_id = #{userId}
    </select>

</mapper>
